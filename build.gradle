apply plugin : 'cpp'
ext.configFile = file "build.properties"
configFile.withReader {
    def prop = new Properties()
    prop.load(it)
    ext.config = new ConfigSlurper().parse prop
}

def name = "AR_X_"

task copyFiles(type: Copy) {
	println "Copying files for zip"
    copy {
        from 'VERSION.txt'
		from 'README.txt'
        from 'libsndfile-1.dll'
		from 'openal32.dll'
		from "bin/ARx.exe"
        into "release/${name}${config.version}"
    }

    copy {
        from 'data/.'
		exclude 'saves'
        into "release/${name}${config.version}/data"
    }
}	
	
task zip(type:Zip, dependsOn: copyFiles) {
	println "Zipping up files."
		from "release/${name}${config.version}"
		archiveName "release/${name}${config.version}.zip"
	}

task release(type: Delete, dependsOn:zip) {
	delete "/release/${name}${config.version}"
}	
	
	println zip.archiveName
	